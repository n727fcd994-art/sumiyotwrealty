# 🔧 無法看到新增物件 - 問題排除指南

## 可能的原因

### 1. ⚠️ CORS 問題（最常見）

**問題**：直接雙擊開啟 `admin.html` 檔案時，瀏覽器會阻止載入 JSON 配置檔案。

**症狀**：
- 物件列表為空白
- 瀏覽器 Console 顯示 CORS 錯誤
- 無法載入配置檔案

**解決方法**：使用本地伺服器

---

## 🚀 解決方法

### 方法 1：使用 Python 本地伺服器（推薦）

1. **開啟命令提示字元（CMD）或 PowerShell**
2. **切換到專案資料夾**：
   ```bash
   cd C:\Users\user\Desktop\my-first-web
   ```

3. **啟動伺服器**：
   ```bash
   # Python 3
   python -m http.server 8000
   
   # 或 Python 2
   python -m SimpleHTTPServer 8000
   ```

4. **在瀏覽器開啟**：
   ```
   http://localhost:8000/admin.html
   ```

---

### 方法 2：使用 Node.js http-server

1. **安裝 http-server**（如果還沒安裝）：
   ```bash
   npm install -g http-server
   ```

2. **在專案資料夾執行**：
   ```bash
   cd C:\Users\user\Desktop\my-first-web
   http-server
   ```

3. **在瀏覽器開啟**：
   ```
   http://localhost:8080/admin.html
   ```

---

### 方法 3：使用 VS Code Live Server 擴充功能

1. **安裝 Live Server 擴充功能**
   - 開啟 VS Code
   - 點擊左側擴充功能圖示
   - 搜尋 "Live Server"
   - 安裝

2. **啟動伺服器**
   - 右鍵點擊 `admin.html`
   - 選擇 "Open with Live Server"

---

## 📋 檢查清單

### ✅ 步驟 1：確認使用本地伺服器

- [ ] 使用 `http://localhost:xxxx` 開啟，而不是 `file:///` 路徑
- [ ] 瀏覽器網址列顯示 `http://` 開頭

### ✅ 步驟 2：檢查瀏覽器 Console

1. **開啟開發者工具**：按 `F12`
2. **查看 Console 標籤**
3. **檢查是否有錯誤訊息**

**常見錯誤**：
- `CORS policy` → 需要使用本地伺服器
- `Failed to fetch` → 檢查檔案路徑是否正確
- `Unexpected token` → JSON 格式錯誤

### ✅ 步驟 3：確認配置檔案存在

檢查以下檔案是否存在：
- `config/site-config.json`
- `config/content.json`
- `config/properties.json`

### ✅ 步驟 4：檢查 JSON 格式

使用 JSON 驗證工具檢查格式：
- https://jsonlint.com/
- 或使用 VS Code 的 JSON 驗證

**常見格式錯誤**：
- 缺少逗號
- 多餘的逗號
- 引號使用錯誤（應使用雙引號 `"`）

### ✅ 步驟 5：新增物件後的步驟

1. **在後台新增物件**
2. **點擊「儲存物件」**
3. **下載 `properties.json` 檔案**
4. **將下載的檔案覆蓋 `config/properties.json`**
5. **重新整理瀏覽器頁面**（F5 或 Ctrl+R）
6. **檢查物件列表是否顯示**

---

## 🔍 診斷工具

### 檢查配置是否載入成功

在瀏覽器 Console 中輸入：
```javascript
// 檢查配置是否載入
console.log('Site Config:', siteConfig);
console.log('Properties Data:', propertiesData);
console.log('Properties Count:', propertiesData.properties?.length);
```

### 手動測試載入

在 Console 中輸入：
```javascript
// 測試載入配置
fetch('config/properties.json')
  .then(res => res.json())
  .then(data => {
    console.log('載入成功！', data);
    console.log('物件數量：', data.properties.length);
  })
  .catch(err => {
    console.error('載入失敗：', err);
  });
```

---

## 🛠️ 快速修復

### 如果物件列表為空白

1. **檢查 Console 錯誤**
2. **確認使用本地伺服器**
3. **重新載入頁面**（Ctrl+F5 強制重新載入）
4. **檢查 `config/properties.json` 格式**

### 如果新增物件後看不到

1. **確認已下載 `properties.json`**
2. **確認已覆蓋 `config/properties.json`**
3. **確認 JSON 格式正確**
4. **重新載入後台頁面**

---

## 📝 正確的工作流程

### 新增物件流程

1. ✅ 使用本地伺服器開啟 `admin.html`
2. ✅ 點擊「物件管理」標籤
3. ✅ 點擊「新增物件」
4. ✅ 填寫表單並上傳圖片
5. ✅ 點擊「儲存物件」
6. ✅ **下載 `properties.json` 檔案**
7. ✅ **將檔案覆蓋 `config/properties.json`**
8. ✅ **將圖片檔案放入 `images/` 資料夾**
9. ✅ **重新整理頁面**

### 查看物件流程

1. ✅ 使用本地伺服器開啟網站
2. ✅ 開啟 `properties.html` 或 `index.html`
3. ✅ 物件應該會自動顯示

---

## ⚠️ 常見錯誤訊息

### "Failed to fetch config/properties.json"

**原因**：CORS 問題或檔案不存在

**解決**：
- 使用本地伺服器
- 檢查檔案路徑

### "Unexpected token in JSON"

**原因**：JSON 格式錯誤

**解決**：
- 使用 JSON 驗證工具檢查
- 確認逗號、引號正確

### "propertiesData is undefined"

**原因**：配置檔案載入失敗

**解決**：
- 檢查檔案是否存在
- 使用本地伺服器
- 檢查 Console 錯誤

---

## 💡 提示

1. **始終使用本地伺服器**：不要直接雙擊 HTML 檔案
2. **檢查 Console**：開發者工具是診斷問題的最佳工具
3. **備份檔案**：編輯前先備份 JSON 檔案
4. **驗證 JSON**：使用線上工具驗證格式

---

## 📞 仍無法解決？

如果以上方法都無法解決，請提供：
1. 瀏覽器 Console 的錯誤訊息
2. 使用的瀏覽器版本
3. 是否使用本地伺服器
4. `config/properties.json` 的內容（前幾行）










